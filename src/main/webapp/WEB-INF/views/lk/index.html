<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{title}">Yedom</title>
    <link rel="stylesheet" href="../../resources/css/material-kit.css" th:href="@{/resources/css/material-kit.css}">
    <link href="https://fonts.googleapis.com/icon?family=Material+Icons" rel="stylesheet">
    <script src="../../resources/js/jquery.js" th:src="@{/resources/js/jquery.js}" rel="stylesheet"></script>
</head>
<body class="index-page sidebar-collapse">
<nav class="navbar navbar-color-on-scroll fixed-top navbar-expand-lg navbar-transparent" color-on-scroll="1">
    <div class="container">
        <div class="navbar-translate"></div>
        <div id="collapse navbar-collapse">
            <ul class="navbar-nav ml-auto">
                <li class="nav-item">
                    <a class="nav-link" href="/courses" th:text="#{common.courses}"><i class="material-icons">lk</i>Курсы</a>
                </li>
                <li class="nav-item">
                    <a class="nav-link" href="/lk" th:text="#{common.lk}"><i class="material-icons">lk</i>Личный кабинет</a>
                </li>
            </ul>
        </div>
    </div>
</nav>

<div class="container">
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
</div>

<div class="main main-raised col-md-4 mx-auto text-center section">
    <div class="container">
        <form id="form" action="/lk" method="POST" th:method="POST" th:action="@{/lk}" th:object="${user}">
            <!-- Username -->
            <label th:value="#{auth.username}" for="username">Ник</label>
            <br />
            <input th:field="*{username}" id="username" name="username" type="text" th:value="${user.username}" value="Username" />
            <br />
            <br />

            <!-- Email -->
            <label th:value="#{auth.email}" for="email">Email</label>
            <br />
            <input disabled="disabled" style="border: none; color: green; text-align: center;" value="email" th:value="${user.email}" id="email" name="email" />
            <input th:field="*{email}" hidden="hidden" style="border: none; color: green; text-align: center;" value="email" th:value="${user.email}" />
            <br />
            <br />

            <!-- Role -->
            <label th:value="#{auth.lk.role}" for="role">Роль</label>
            <br />
            <input disabled="disabled" style="border: none; color: green; text-align: center;" value="user" th:value="${user.role}" id="role" name="role" />
            <input th:field="*{role}" hidden="hidden" style="border: none; color: green; text-align: center;" value="user" th:value="${user.role}" />
            <br />
            <br />

            <!-- New password -->
            <label th:value="#{auth.lk.new_password.change}" for="password">Новый пароль</label>
            <br />
            <input th:field="*{newPassword}" th:placeholder="#{auth.lk.new_password.change}" type="text" id="newPassword" name="newPassword" />
            <br />
            <br />
            <input th:field="*{newPasswordRepeat}" th:placeholder="#{auth.lk.new_password.change.repeat}" type="text" id="newPasswordRepeat" name="newPasswordRepeat" />
            <br />
            <br />

            <!-- Password -->
            <label th:value="#{auth.password}" for="role">Ваш пароль</label>
            <br />
            <input th:field="*{password}" th:placeholder="#{auth.password}" id="password" name="password" />
            <br />
            <br />

            <!-- Buttons -->
            <input type="submit" name="edit" value="Сохранить" th:value="#{auth.lk.save}"/>
            <br />
            <br />
            <input onclick="clickLeave()" type="button" name="log_out" value="Выйти" th:value="#{auth.lk.log_out}"/>
            <br />
            <br />
        </form>

        <!-- Errors -->
        <div th:if="${#fields.hasErrors('user.*')}">
            <h4  th:text="#{common.errors}">Errors:</h4>
            <ul>
                <li style="color: red;" th:each="err : ${#fields.errors('user.*')}" th:text="${err}" />
            </ul>
        </div>
    </div>
</div>

<footer class="footer" data-background-color="black">
    <div class="container">
        <nav class="float-left">
            <ul>
                <li>
                    <a target="_blank" rel="noopener noreferrer" href="https://github.com/Yedom" th:text="#{common.developers}">Разработчики</a>
                </li>
            </ul>
        </nav>
        <div class="copyright float-right">
            2022-<script>document.write(new Date().getFullYear())</script> © <text th:text="#{title}">Yedom</text>
        </div>
    </div>
</footer>

<script th:inline="javascript">
    function clickLeave() {
        let data = {operation: "logout"};
        fetch("/lk", {
            method: "POST",
            headers: {'Content-Type': 'application/json'},
            body: JSON.stringify(data)
        });
        window.location.href = "/";
    }
</script>

<script src="../../resources/js/popper.js" th:src="@{/resources/js/popper.js}" rel="stylesheet"></script>
<script src="../../resources/js/material-design.js" th:src="@{/resources/js/material-design.js}" rel="stylesheet"></script>
<script src="../../resources/js/material-kit.js" th:src="@{/resources/js/material-kit.js}" rel="stylesheet"></script>

</body>
</html>