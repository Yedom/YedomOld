<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <title th:text="#{title}">Yedom</title>
    <!-- Info -->
    <meta name="description" content="Yedom education platform">
    <meta name="keywords" content="yedom, education, platform, education platform, smart search, graphs, AR, AR technologies, online courses, courses, образовательная платформа, курсы, онлайн курсы">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">

    <!-- Styles -->
    <link rel="stylesheet" th:href="@{/resources/libs/material-icons.css}">
    <link rel="stylesheet" th:href="@{/resources/libs/material-kit.css}">
    <link rel="stylesheet" th:href="@{/resources/css/common.css}">

    <!-- Scripts -->
    <script th:src="@{/resources/libs/jquery.js}"></script>
    <script th:src="@{/resources/libs/material-kit.js}"></script>
    <script th:src="@{/resources/libs/particles.js}"></script>
    <script th:src="@{/resources/libs/popper.js}"></script>
    <script th:src="@{/resources/libs/material-design.js}"></script>
    <script th:src="@{/resources/libs/bootstrap.bundle.min.js}"></script>
</head>
<body class="bg index-page sidebar-collapse">

<div th:replace="../resources/components/header.html :: header-fragment"></div>

<div id="particles-container"></div>

<div class="bg">
    <br />
    <br />
    <br />
    <br />
    <br />
</div>

<div class="bg unselectable">
    <div class="main col-md-6 mx-auto text-center">
        <div th:replace="../resources/components/profilemenus.html :: profile-fragment"></div>

        <div id="orgCreate">
            <br />
            <input type="button" onclick="window.location='/organization/add'"
                   class="btn main-button" value="Создать организацию" th:value="#{organization.create}" />
            <br />
            <br />
        </div>

        <!-- Organizations in -->
        <div class="container">
            <div class="row">
                <div class="col-md-12">
                    <h2 th:text="#{profile.organizations}">Organizations</h2>
                    <div class="card">
                        <div class="card-body">
                            <div class="table-responsive">
                                <table class="table">
                                    <tr>
                                        <th class="text-center" th:text="#{organization.icon}">Organization icon</th>
                                        <th class="text-center" th:text="#{organization.name}">Organization name</th>
                                        <th class="text-center" th:text="#{courses.count}">Courses count</th>
                                        <th class="text-center" th:text="#{auth.lk.role}">Role</th>
                                    </tr>
                                    <tbody>

                                    <tr class="clickable-tr" th:each="organization : ${organizations}"
                                        th:attr="onclick=|clickOrg('${organization.name}')|">
                                        <td class="text-center">
                                            <img class="img-raised rounded-circle img-fluid" src="../../resources/images/default.png"
                                                 style="width: 50px; height: 50px;"
                                                 th:src="${organization.avatar}"  alt="..."/>
                                        </td>
                                        <td class="text-center" th:text="${organization.name}">Yedom</td>
                                        <td class="text-center" th:text="${@organizationsService.getCoursesCount(organization.id)}">13</td>
                                        <td class="text-center" th:text="${@organizationsService.getUserRoleInOrganization(organization.id, user)}">Admin</td>
                                    </tr>

                                    </tbody>
                                </table>
                            </div>
                        </div>
                    </div>
                    <br />
                </div>
            </div>
        </div>
    </div>
</div>

<div class="bg">
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
    <br />
</div>

<div th:replace="../resources/components/footer.html :: footer-fragment"></div>

<script th:inline="javascript">
    let userEntityName = /*[[${user.username}]]*/ '';
    let userName = /*[[${session_username}]]*/ '';
</script>

<script th:src="@{/resources/js/profile/organizations.js}"></script>

<script>
    particlesJS.load('particles-container', '../../resources/assets/particles.json', function () {
        console.log('particles-js loaded!');
    });
</script>

</body>
</html>